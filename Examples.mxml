<?xml version="1.0" encoding="utf-8"?>
<s:Application 
	xmlns:fx="http://ns.adobe.com/mxml/2009"
	xmlns:s="library://ns.apache.org/royale/spark"
	xmlns:mx="library://ns.apache.org/royale/mx"
	xmlns:comp="components.*"
	>
	<fx:Script>
		<![CDATA[
			import mx.core.UIComponent;

			private function add():void
			{
				var myGroup:Group = new Group();
				myGroup.percentWidth = 100;
				// swap order of following 2 lines to get an infinite layout loop
				as3.addChild(myGroup);
				myGroup.addChild(new CustomGroup());
			}

			private function toggle():void
			{
				myViewStack.selectedChild = myViewStack.selectedChild == as3 ? mxml : as3;
				myButton.label = (myViewStack.selectedChild as UIComponent).id;
			}
		]]>
	</fx:Script>		
	<s:VGroup right="0">
		<s:Button id="myButton" label="{(myViewStack.selectedChild as UIComponent).id}" click="toggle()"/>
		<s:Button label="Add" click="add()"/>
	</s:VGroup>
	<mx:ViewStack selectedIndex="0" width="50%" id="myViewStack">
		<s:NavigatorContent id="mxml" width="100%">
			<s:Group id="group1" width="100%">
				<comp:CustomGroup width="100%"/>
			</s:Group>
		</s:NavigatorContent>
		<s:NavigatorContent id="as3" width="100%"/>
	</mx:ViewStack>
</s:Application>
